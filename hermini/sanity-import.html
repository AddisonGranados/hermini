<!doctype html>
<html>
  <body>
    <h3>Import sanity check</h3>
    <input id="f" type="file" accept="application/json">
    <pre id="out" style="border:1px solid #ccc; padding:8px"></pre>
    <script>
      const f = document.getElementById('f'), out = document.getElementById('out');
      f.addEventListener('change', async (e) => {
        const file = e.target.files[0]; if (!file) return;
        try {
          const text = await file.text();
          const obj = JSON.parse(text);
          if (!obj.solution) throw new Error("Missing 'solution' key");
          const rows = obj.solution.length;
          const cols = (obj.solution[0]||'').length;
          if (!rows || !cols) throw new Error("Empty solution matrix");
          if (obj.solution.some(r => r.length !== cols)) throw new Error("Solution rows have different lengths");
          out.textContent = `OK: ${rows}Ã—${cols} grid detected.\nFirst row: "${obj.solution[0]}"`;
        } catch (err) {
          out.textContent = 'ERROR: ' + err.message;
          console.error(err);
        }
        e.target.value = '';
      });
    </script>
  </body>
</html>
